<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>100 Largest Companies by Revenue in the United States in 2022</title>

    <!-- Leaflet JavaScript code-->
    <script src="https://unpkg.com/leaflet@1.3.3/dist/leaflet.js" integrity="sha512-tAGcCfR4Sc5ZP5ZoVz0quoZDYX5aCtEm/eu1KhSLj2c9eFrylXZknQYmxUssFaVJKvvc0dJQixhGjG2yXWiV9Q==" crossorigin=""></script>

    <!-- Leaflet heatmap plugin-->
    <script type="text/javascript" src="../static/js/leaflet-heat.js"></script>
        
    <!-- D3 library -->
    <script src="https://d3js.org/d3.v5.min.js"></script>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.3/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin="" />
        
    <!-- Our CSS  -->
    <link rel="stylesheet" href="../static/css/style.css" />
    
</head>
<body style="background-color:lightblue;">
    <h1 style="text-align:center">Headquarters of the 100 Largest Companies by Revenue in the United States in 2022</h1>
    
    <select id="selDataset">
        <option value="opt1">Opt1</option>
        <option value="opt2">Opt2</option>
    </select>


    <div id="map"></div>

    <script>

        var myMap = L.map("map", {
        center: [37, -95.7],
        zoom: 5
        });

        var url = "http://127.0.0.1:5000/api/v1.0/companies";
        d3.json(url).then(function(data) {
            console.log(data)
            


            // Adding the tile layer
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(myMap);

            var heatArray = [];

            for (var i = 0; i < data.length; i++) {
                console.log(`${data[i].headquarters_lat}, ${data[i].headquarters_lon}`);
                heatArray.push([data[i].headquarters_lat, data[i].headquarters_lon, 300]);
                
            }

            var heat = L.heatLayer(heatArray, {
                radius: 75,
                blur: 75
            }).addTo(myMap);

        });

    </script>

    <h2>Title</h2>

    <p>Info</p>



</body>
</html>
